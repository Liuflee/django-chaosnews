{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Detalle de Noticia - Chaos News</title>
  <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" type="text/css" href="{% static 'styles.css' %}">

  <!-- script para cambiar modo -->
  <script src="{% static 'script.js' %}"></script>
</head>

<body class="light-mode"> <!-- clase para el modo oscuro -->

<!-- Navbar -->
<nav class="navbar navbar-expand-lg navbar">
  <a class="navbar-brand" href="{% url 'index' %}"> <img class="logo" src="{% static 'images/Chaos News-logo.png' %}" alt=""></a>
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  <div class="collapse navbar-collapse" id="navbarSupportedContent">
    <ul class="navbar-nav m-auto">
      <li class="nav-item">
        <a class="nav-link" href="{% url 'quienes_somos' %}"><img src="{% static 'images/about-us-icon.png' %}" class="icon about-us-icon" alt=""> Quiénes somos</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="{% url 'FAQ' %}"><img src="{% static 'images/FAQ-icon.png' %}"  class="icon faq-icon" alt=""> FAQ</a>
      </li>
      
      <li class="nav-item">
        <a class="nav-link" id="contacto" data-toggle="modal" data-target="#contactoModal"><img src="{% static 'images/contact-us-icon.png' %}" class="icon contact-us-icon" alt=""> Contáctanos</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" id="loginBtn" href="{% url 'login' %}"><img src="{% static 'images/login-icon.png' %}" class="icon login-icon" alt=""> Inicio de sesión</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" id="modoBtn" href="#"><img src="{% static 'images/dark-theme-icon.png' %}" class="icon dark-mode-icon" alt=""> Cambiar de Modo</a>
      </li>
    </ul>
  </div>
</nav>


<hr  class="hrxd">
<!-- Contenido de la noticia en detalle -->
<div class="container mt-4">
  <div class="row justify-content-left">
    <div class="col-lg-8">
      <!-- Título de la noticia -->
      <h2 class="mb-4 title-text">{{ noticia.titulo }}</h2>
      <p>Historia de {{ noticia.autor }}</p>
      <!-- Imagen de la noticia -->
      <hr class="hrxd">
      <div class="text-right mb-4">
        <img src="{{ noticia.imagen.url }}" class="img-fluid" alt="{{ noticia.titulo }}">
      </div>
      
      <!-- Etiquetas de categoría -->
      <div class="mb-3">
        {% for etiqueta in noticia.etiquetas.all %}
            <span class="badge badge-primary">{{ etiqueta }}</span>
        {% endfor %}
      </div>
      <!-- Contenido de la noticia -->
      <p class="lead">{{ noticia.contenido }}</p>

    </div>


{% if noticias_relacionadas %}
<div class="col-lg-4">
    <div class="other-news">
        <h6>Noticias relacionadas</h6>
        <div class="other-news-insidediv">
            {% for noticia_relacionada in noticias_relacionadas|slice:":3" %}
                <!-- Enlace para dirigirse a la página de detalle de la noticia relacionada -->
                <a href="{% url 'detalle_noticia' noticia_relacionada.id %}">{{ noticia_relacionada.titulo }}</a>
                <!-- Mostrar el hr solo si hay más de una noticia relacionada -->
                {% if noticias_relacionadas|length > 1 and not forloop.last %}
                    <hr class="hrxd">
                {% endif %}
            {% endfor %}
        </div>
    </div>
</div>
{% endif %}






  </div>
</div>

<!-- Botón para volver arriba -->
<button id="volverArribaBtn" class="btn button volver-arriba-btn" onclick="scrollToTop()">
  <img src="{% static '/images/backarrow.png' %}" alt="" class="volver-arriba-img">
</button>

<!-- Modal de contacto -->

<div id="contactoModal" class="modal fade" tabindex="-1" role="dialog">
  <div class="modal-dialog" role="document">
    <div class="modal-content dark-mode-bg"> <!-- Añade la clase dark-mode-bg al modal -->
      <div class="modal-header">
        <h5 class="modal-title">Contáctanos</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <h1 class="text-center">Contáctanos</h1>
        <p class="text-center">¡Estamos aquí para ayudarte! Completa el siguiente formulario y nos pondremos en contacto contigo lo antes posible.</p>

        <form action="enviar.php" method="post">
          <div class="form-group mt-5">
            <input type="text" class="form-control form-control-sm" id="nombre" name="nombre" placeholder="Nombre" required>
          </div>
          <div class="form-group">
            <input type="email" class="form-control form-control-sm" id="email" name="email" placeholder="Correo electrónico" required>
          </div>
          <div class="form-group">
            <textarea class="form-control form-control-sm" id="mensaje" name="mensaje" rows="5" placeholder="Mensaje" required></textarea>
          </div>
          <div class="text-center">
            <button type="submit" class="btn btn-primary">Enviar mensaje</button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>

<footer class="footer mt-auto py-3">
      
    <div class="container">
        <hr class="hrxd">
      <span class="text-muted">© 2024 Chaos News. Todos los derechos reservados.</span>
    </div>
  </footer>

<!-- Scripts de Bootstrap y otros -->
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
<script>
  function stickyOtherNews() {
  var otherNews = document.querySelector('.other-news');
  var otherNewsOffset = otherNews.offsetTop;
    if (window.scrollY > otherNewsOffset) {
        otherNews.classList.add('sticky');
    } else {
        otherNews.classList.remove('sticky');
    }
}

  // Agregar un event listener para detectar el desplazamiento de la página
  window.addEventListener('scroll', stickyOtherNews);

</script>

</body>
</html>

